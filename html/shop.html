<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Shop | MASO</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="author" content="Rick C">
      <meta name="robots" content="noindex, nofollow">
      <link href="../css/style.css" rel="stylesheet" type="text/css">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Teko:wght@300..700&display=swap">
  </head>
  <body>
    <header>
      <p class="topBar">Museum of Antarctic Supernatural Occurrences</p>
        <nav>
            <button onclick="location.href='../index.html'">Home</button>
            <button onclick="location.href='../html/staff.html'">Staff</button>
            <button onclick="location.href='../html/collections.html'">Collections</button>
            <button onclick="location.href='../html/shop.html'">Shop</button>
            <button onclick="location.href='../html/cart.html'" id="viewCartBtn">View Cart</button>
        </nav>
    </header>
        
    <main>
      <h1 class="shop">Souvenir Shop</h1>
      
      <div class="shop-container"> 

        <!-- Item 1 -->
        <div class="souvenir-item" data-id="item001" title="The Aurora Disk Object Keychain!">
          <img src="../images/shop/AuroraDiskObjectKeyChain.png" alt="A product image of a short silver keychain with a flat image of the Aurora Disk Object sitting in the snow" onclick="openModal(this)" />
          <h3>UFO Keychain</h3>
          <p>Get your own tiny keychain of the Aurora Disk Object, this is a great souviner to take back with you!</p>
          <p><strong>Price:</strong> $10.00 </p>
          <span class="qty-badge" aria-live="polite"></span>
          
          <button onclick="addToCart(this)" data-id="item001" data-name="Aurora Disk Object Keychain" data-price="10.00" data-image="../images/shop/AuroraDiskObjectKeyChain.png">Add Aurora Disk Object Keychain to Cart</button>
        </div><!-- End of Item 1 -->

        <!-- Item 2 -->
        <div class="souvenir-item" data-id="item002" title="The Aurora Australis Anomaly Plush!">
          <img src="../images/shop/AuroraAstralisAnomalyPlush.png" alt="Product image of a medium-sized stuffed plushie of a cartoon depiction of the Aurora Australis Anomaly with black fur with green streaks." onclick="openModal(this)" />
          <h3>Aurora Australis Anomaly Plush</h3>
          <p>A friendly replica of the Aurora Australis Anomaly, it's soft and glows in the dark!</p>
          <p><strong>Price:</strong> $20.00</p>
          <span class="qty-badge" aria-live="polite"></span>
          <button onclick="addToCart(this)" data-id="item002" data-name="Aurora Australis Anomaly Plush" data-price="20.00" data-image="../images/shop/AuroraAstralisAnomalyPlush.png">Add Aurora Australis Anomaly Plush to Cart</button>
        </div><!-- End of Item 2 -->

        <!-- Item 3 -->
        <div class="souvenir-item" data-id="item003" title="The South Pole Orb Magnetic Replica!">
          <img src="../images/shop/TheSouthPoleOrbReplica.png" alt="Product image of a magnetic replica of the South Pole Orb flowing above a black electric base with blue, green, and purple LEDs." onclick="openModal(this)" />
          <h3>Specimen 013</h3>
          <p>A small replica of The South Pole Orb, plug it in and see it float like the real thing!</p>
          <p><strong>Price:</strong> $30.00</p>
          <span class="qty-badge" aria-live="polite"></span>
          <button onclick="addToCart(this)" data-id="item003" data-name="The South Pole Orb" data-price="30.00" data-image="../images/shop/TheSouthPoleOrbReplica.png">Add The South Pole Orb to Cart</button>
        </div><!-- End of Item 3 -->

        <!-- Item 4 -->
        <div class="souvenir-item" data-id="item004" title="The Fallen Star Keychain!">
          <img src="../images/shop/FallenStarKeyChain.png" alt="Product image of a black ball containing coloration that looks like the Aurora Australis on a short silver keychain." onclick="openModal(this)" />
          <h3>Fallen Star Keychain</h3>
          <p>Get your own tiny keychain replica of the mysterious Fallen star, it glows in the dark!</p>
          <p><strong>Price:</strong> $10.00</p>
          <span class="qty-badge" aria-live="polite"></span>
          <button onclick="addToCart(this)" data-id="item004" data-name="The Fallen Star Keychain" data-price="10.00" data-image="../images/shop/FallenStarKeyChain.png">Add The Fallen Star Keychain to Cart</button>
        </div><!-- End of Item 4 -->

      </div> <!-- End of Shop container -->
    </main>
        

  <!-- MODAL -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeModal()">&times;</span>
      <img id="modal-image" src="" alt="">
    </div>
  </div>

  <script>
    function addToCart(itemId) {
      console.log("Pressed Add to cart");
      
    //this key links the shop to the cart

      const CART_KEY = 'museumCartV1';
      addToCart(itemId);
      

  // This function reads the Cart information and write it to JSON  
      function readCart() {
        // console.log("Read cart function ran");
        try { return JSON.parse(localStorage.getItem(CART_KEY)) || []; }
        catch { return []; }
      }

      function writeCart(cart) {
        // console.log("Write cart function ran");
        localStorage.setItem(CART_KEY, JSON.stringify(cart));
      }
  
  /*This function is called by the addToCart button the first part reads the dataset contined in the buttons and asssigns the values to variables */

      function addToCart(btn) {
        // console.log("Inner addtoCart function ran");
        const id = btn.dataset.id;
        const name = btn.dataset.name;
        const unitPrice = Number(btn.dataset.price);
        const image = btn.dataset.image;

      /* This part puts all of the individual items and puts them into an object called cart and writes it to LocalStorage   */

        let cart = readCart();
        const idx = cart.findIndex(it => it.id === id);
        if (idx >= 0) {
          cart[idx].qty += 1;
        } else {
          cart.push({ id, name, unitPrice, qty: 1, image });
        }
        writeCart(cart);

        // Update the item card's qty badge

        const card = btn.closest('.souvenir-item');
        if (card) {
          const badge = card.querySelector('.qty-badge');
          if (badge) {
            const item = cart.find(it => it.id === id);
            badge.textContent = item ? `Qty: ${item.qty}` : '';
          }
        }
      }
    }
    

    function openModal(imgElement) {
      const modal = document.getElementById("modal");
      const modalImage = document.getElementById("modal-image");
      modalImage.src = imgElement.src;
      modalImage.alt = imgElement.alt;
      modal.style.display = "block";
    }

    function closeModal() {
      document.getElementById("modal").style.display = "none";
    }

    // Optional: Close modal on outside click
    window.onclick = function(event) {
      const modal = document.getElementById("modal");
      if (event.target === modal) {
        closeModal();
      }
    }
  </script>
        
        </main>

        <footer>
            <p class="footer">This is a fictitious website created purely for academic purposes. The content of this website was generated by AI.</p>
        </footer>
    </body>
</html>
